(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t,n){},304:function(e,t){},306:function(e,t){},472:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(13),i=n.n(c),r=n(527),s=n(510),o=n(148),l=n.n(o),d=n(73),j=n(508),u=n(475),b=n(505),m=n(153),O=n(9),x=n(229),h=n(149),p=n.n(h),g=n(2),f=Object(a.createContext)(),y=Object(x.io)("http://localhost:5000"),v=function(e){var t,n=e.children,c=Object(a.useState)(),i=Object(O.a)(c,2),r=i[0],s=i[1],o=Object(a.useState)(""),l=Object(O.a)(o,2),d=l[0],j=l[1],u=Object(a.useState)({}),b=Object(O.a)(u,2),x=b[0],h=b[1],v=Object(a.useState)(!1),C=Object(O.a)(v,2),S=C[0],k=C[1],w=Object(a.useState)(!1),N=Object(O.a)(w,2),M=N[0],T=N[1],R=Object(a.useState)(""),D=Object(O.a)(R,2),F=D[0],I=D[1],V=Object(a.useState)(!0),B=Object(O.a)(V,2),E=B[0],z=B[1],L=Object(a.useState)(),U=Object(O.a)(L,2),A=U[0],J=U[1],q=Object(a.useState)(!0),W=Object(O.a)(q,2),_=W[0],P=W[1],H=Object(a.useState)(),G=Object(O.a)(H,2),K=G[0],Q=G[1],X=Object(a.useState)(!0),Y=Object(O.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)(""),te=Object(O.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)([]),ie=Object(O.a)(ce,2),re=ie[0],se=ie[1],oe=Object(a.useState)(""),le=Object(O.a)(oe,2),de=le[0],je=le[1],ue=Object(a.useState)(!1),be=Object(O.a)(ue,2),me=be[0],Oe=be[1],xe=Object(a.useRef)(),he=Object(a.useRef)(),pe=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){s(e),xe.current.srcObject=e})),y.on("me",(function(e){return j(e)})),y.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;h({isReceivingCall:!0,from:t,name:n,signal:a})})),y.on("updateUserMedia",(function(e){var t=e.type,n=e.currentMediaStatus;if(null!==n||n!==[])switch(t){case"video":J(n);break;case"mic":Q(n);break;default:Q(n[0]),J(n[1])}})),y.on("recieveMsg",(function(e){e.name;var t=e.msg,n=e.sender,a={};a.msg=t,a.type="rcv",a.sender=n,a.timestamp=Date.now(),se((function(e){return[].concat(Object(m.a)(e),[a])}))}))}),[]);return Object(g.jsx)(f.Provider,{value:{call:x,callAccepted:S,myVideo:xe,userVideo:he,stream:r,name:F,setName:I,callEnded:M,me:d,callUser:function(e){var t=new p.a({initiator:!0,trickle:!1,stream:r});Oe(!0),t.on("signal",(function(t){y.emit("callUser",{userToCall:e,signalData:t,from:d,name:F})})),ae(e),t.on("stream",(function(e){he.current.srcObject=e})),y.on("callAccepted",(function(e){var n=e.signal,a=e.uname;Oe(!1),k(!0),je(a),t.signal(n),y.emit("updateMyMedia",{type:"both",currentMediaStatus:[_,E]})})),pe.current=t},leaveCall:function(){T(!0),pe.current.destroy(),window.location.reload()},answerCall:function(){k(!0);var e=new p.a({initiator:!1,trickle:!1,stream:r});ae(x.from),e.on("signal",(function(e){y.emit("answerCall",{signal:e,to:x.from,uname:F,type:"both",myMediaStatus:[_,E]})})),e.on("stream",(function(e){he.current.srcObject=e})),e.signal(x.signal),pe.current=e},myCamStatus:E,setmyCamStatus:z,userCamStatus:A,setuserCamStatus:J,updateVideo:function(){z((function(e){return y.emit("updateMyMedia",{type:"video",currentMediaStatus:!e}),r.getVideoTracks()[0].enabled=!e,!e}))},myMicStatus:_,userMicStatus:K,updateMic:function(){P((function(e){return y.emit("updateMyMedia",{type:"mic",currentMediaStatus:!e}),r.getAudioTracks()[0].enabled=!e,!e}))},shareScreen:function(){Z?navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){xe.current.srcObject=e,t=e,S&&pe.current.replaceTrack(r.getVideoTracks()[0],e.getVideoTracks()[0],r),$(!1),e.getTracks()[0].onended=function(){xe.current.srcObject=r,S&&pe.current.replaceTrack(e.getVideoTracks()[0],r.getVideoTracks()[0],r),$(!0)}})):($(!0),t=xe.current.srcObject,xe.current.srcObject=r,S&&pe.current.replaceTrack(t.getVideoTracks()[0],r.getVideoTracks()[0],r))},myScreen:Z,uname:de,calling:me,sendMsg:function(e){y.emit("messageUser",{name:F,to:ne,msg:e,sender:F});var t={};t.msg=e,t.type="sent",t.timestamp=Date.now(),t.sender=F,se([].concat(Object(m.a)(re),[t]))},chat:re,setChat:se,setOtherUser:ae},children:n})},C=n(477),S=n(511),k=n(235),w=n.n(k),N=n(236),M=n.n(N),T=n(237),R=n.n(T),D=n(238),F=n.n(D),I=n(239),V=n.n(I),B=n(240),E=n.n(B),z=n(241),L=n.n(z),U=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},video:Object(d.a)({width:"600px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(d.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"20px",background:"black",color:"white"},ButtonGroup:{background:"violet",justifyContent:"center"}}})),A=function(){var e=Object(a.useContext)(f),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,o=e.stream,l=e.call,d=e.myCamStatus,b=e.updateVideo,m=e.myMicStatus,O=e.updateMic,x=e.shareScreen,h=e.myScreen,p=e.uname,y=U();return Object(g.jsxs)("div",{className:y.root,children:[Object(g.jsxs)(j.a,{container:!0,className:y.gridContainer,children:[o&&Object(g.jsx)(u.a,{className:y.paper,children:Object(g.jsxs)(j.a,{item:!0,xs:5,md:3,children:[Object(g.jsx)(s.a,{variant:"h4",gutterBottom:!0,background_color:"red",children:t||"My Name"}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:y.video,style:{opacity:"".concat(d?"1":"0")}})]})}),n&&!r&&Object(g.jsx)(u.a,{className:y.paper,children:Object(g.jsxs)(j.a,{item:!0,xs:12,md:6,children:[console.log(l.name),Object(g.jsx)(s.a,{variant:"h4",background_color:"red",gutterBottom:!0,children:l.name||p||"Caller Name"}),Object(g.jsx)("video",{playsInline:!0,id:"usVideo",ref:i,autoPlay:!0,className:y.video})]})})]}),Object(g.jsxs)(S.a,{class:"btn-toolbar",variant:"contained",color:"primary","aria-label":"contained primary button group",className:y.buttons,children:[Object(g.jsx)(C.a,{startIcon:m?Object(g.jsx)(w.a,{}):Object(g.jsx)(M.a,{}),onClick:function(){return O()},children:m?Object(g.jsx)("span",{children:"Mute"}):Object(g.jsx)("span",{children:"Unmute"})}),Object(g.jsx)(C.a,{startIcon:d?Object(g.jsx)(R.a,{}):Object(g.jsx)(F.a,{}),onClick:function(){return b()},children:d?Object(g.jsx)("span",{children:"Turn off Video"}):Object(g.jsx)("span",{children:"Turn on Video"})}),Object(g.jsx)(C.a,{startIcon:h?Object(g.jsx)(V.a,{}):Object(g.jsx)(E.a,{}),onClick:function(){return x()},children:h?Object(g.jsx)("span",{children:"Share Screen"}):Object(g.jsx)("span",{children:"Stop Sharing Screen"})}),Object(g.jsx)(C.a,{startIcon:Object(g.jsx)(L.a,{}),onClick:function(){return function(){if(n){var e=document.getElementById("usVideo");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}()},children:"Fullscreen"})]})]})},J=n(512),q=n(528),W=n(242),_=n(513),P=n(514),H=n(243),G=n.n(H),K=n(515),Q=n(516),X=n(517),Y=n(518),Z=n(519),$=n(520),ee=n(521),te=n(522),ne=n(523),ae=n(524),ce=n(525),ie=n(526),re=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column"},shares:{padding:"20px 20px",display:"flex",justifyContent:"center"},gridContainer:Object(d.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(d.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),se=function(e){var t=e.children,n=Object(a.useContext)(f),c=n.me,i=n.callAccepted,r=n.name,o=n.setName,l=n.callEnded,d=n.leaveCall,b=n.callUser,m=n.calling,x=Object(a.useState)(""),h=Object(O.a)(x,2),p=h[0],y=h[1],v=re(),S=Object(a.useState)(!1),k=Object(O.a)(S,2),w=k[0],N=k[1],M="https://engage-meets.netlify.app/";return Object(g.jsx)(J.a,{className:v.container,children:Object(g.jsxs)(u.a,{elevation:10,className:v.paper,children:[Object(g.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(g.jsxs)(j.a,{container:!0,className:v.gridContainer,children:[Object(g.jsxs)(j.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Meet Info"}),Object(g.jsx)(q.a,{label:"Name",value:r,onChange:function(e){return o(e.target.value)},fullWidth:!0}),Object(g.jsx)(W.CopyToClipboard,{text:c,onCopy:function(){N(!0),setTimeout((function(){N(!1)}),1e3)},className:v.margin,children:Object(g.jsxs)("div",{children:[Object(g.jsx)(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(g.jsx)(_.a,{fontSize:"large"}),children:"Copy Meeting ID"}),w?Object(g.jsx)("span",{children:" Copied "}):Object(g.jsx)("span",{})]})})]}),Object(g.jsxs)(j.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Join a Meet"}),Object(g.jsx)(q.a,{label:"Meet ID",value:p,onChange:function(e){return y(e.target.value)},fullWidth:!0}),i&&!l?Object(g.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(g.jsx)(G.a,{fontSize:"large"}),fullWidth:!0,onClick:d,className:v.margin,children:"End Call"}):Object(g.jsxs)("div",{children:[Object(g.jsx)(C.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(P.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return b(p)},className:v.margin,children:"Enter Call"}),m?Object(g.jsx)("span",{children:" Calling "}):Object(g.jsx)("span",{})]})]})]})}),t,Object(g.jsxs)("div",{className:v.shares,children:[Object(g.jsx)(K.a,{url:M,body:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)(Q.a,{size:32,round:!0})}),Object(g.jsx)(X.a,{url:M,quote:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)(Y.a,{size:32,round:!0})}),Object(g.jsx)(Z.a,{url:M,summary:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)($.a,{size:32,round:!0})}),Object(g.jsx)(ee.a,{url:M,title:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)(te.a,{size:32,round:!0})}),Object(g.jsx)(ne.a,{url:M,title:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)(ae.a,{size:32,round:!0})}),Object(g.jsx)(ce.a,{url:M,title:"Join my Call with code: "+String(c)+"\nLink: ",children:Object(g.jsx)(ie.a,{size:32,round:!0})})]})]})})},oe=n.p+"static/media/ringtone.62957dca.mp3",le=function(){var e=Object(a.useContext)(f),t=e.answerCall,n=e.call,c=e.callAccepted,i=Object(a.useState)("undefined"!==typeof Audio&&new Audio(oe)),r=Object(O.a)(i,1)[0],s=Object(a.useState)(!1),o=Object(O.a)(s,2),l=o[0],d=o[1];Object(a.useEffect)((function(){l?r.play():r.pause()}),[l,r]);return Object(a.useEffect)((function(){n.isReceivingCall&&!c?d(!0):d(!1)}),[n.isReceivingCall,c]),Object(g.jsx)(g.Fragment,{children:n.isReceivingCall&&!c&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(g.jsxs)("h1",{children:[n.name," is calling: "]}),Object(g.jsx)(C.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"}),Object(g.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(){window.location.reload()},children:"Reject"})]})})})},de=n(245),je=n.n(de),ue=n(258),be=n.n(ue),me=n(260),Oe=n.n(me),xe=n(259),he=n.n(xe),pe=n(261),ge=n.p+"static/media/chatlogo.69eca262.png",fe=(n(472),Object(b.a)((function(e){return{Modal:{height:"100%",width:"100%"},infoBar:{display:"flex",alignItems:"center",justifyContent:"center",color:"white",background:"#9042F5",borderRadius:"8px",height:"60px",width:"100%"},container:{display:"flex",flexDirection:"column",background:"#FFFFFF",borderRadius:"8px",height:"100%",width:"100%"},form:{display:"flex",border:"2px solid #D3D3D3"},sendButton:{color:"#fff",background:"#2979FF",padding:"20px",display:"inline-block",border:"none",width:"20%"},input:{border:"none",borderRadius:"0",padding:"5%",width:"70%",fontSize:"1.2em"},msg_sent:{alignSelf:"flex-end"},mess:{padding:"5% 0",overflow:"auto",height:"100%",maxHeight:"250px"}}}))),ye=function(){var e=Object(a.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],i=function(){return c(!1)},r=fe(),s=Object(a.useContext)(f),o=s.sendMsg,l=s.chat,d=Object(a.useState)(""),j=Object(O.a)(d,2),u=j[0],b=j[1],m=Object(a.useState)(""),x=Object(O.a)(m,2),h=x[0],p=x[1],y=Object(a.useState)(!1),v=Object(O.a)(y,2),k=v[0],w=v[1],N=Object(a.useRef)();Object(a.useEffect)((function(){(null===N||void 0===N?void 0:N.current)&&N.current.scrollIntoView({behavior:"smooth"})}),[l]);var M=function(){u&&u.length&&o(u),b("")},T=function(){var e=JSON.stringify(l,null,2),t=new Blob([e],{type:"text/plain"});""!==h&&window.URL.revokeObjectURL(h),p(window.URL.createObjectURL(t))};return Object(a.useEffect)((function(){T()}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(S.a,{class:"btn-toolbar",variant:"contained",children:[Object(g.jsx)(C.a,{variant:"contained",color:"secondary",size:"lg",startIcon:Object(g.jsx)(be.a,{}),onClick:function(){return c(!0)},children:"Chat"}),Object(g.jsx)(C.a,{variant:"contained",color:"secondary",size:"lg",startIcon:Object(g.jsx)(he.a,{}),onClick:function(){T(),w(!0),setTimeout((function(){w(!1)}),1e4)},children:"Chat Log"})]}),k?Object(g.jsx)("a",{style:{color:"yellow",fontSize:"large"},download:"chatlog.txt",href:h,children:"Download Chat log"}):null,Object(g.jsx)(je.a,{closeOnOuterClick:!0,show:n,onClose:i,containerStyle:{height:"auto",display:"flex",borderRadius:"8px"},children:Object(g.jsxs)("div",{className:r.container,children:[Object(g.jsx)("div",{className:r.infoBar,children:Object(g.jsx)("h2",{children:"CHAT"})}),Object(g.jsx)(pe.a,{children:l.length>0?Object(g.jsxs)("div",{className:r.mess,children:[l.map((function(e){return Object(g.jsx)("div",{className:"sent"===e.type?r.msg_sent:r.msg_rcv,children:"sent"===e.type?Object(g.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(g.jsx)("p",{className:"sentText pr-10",children:e.sender}),Object(g.jsx)("div",{className:"messageBox backgroundBlue",children:Object(g.jsx)("p",{className:"messageText colorWhite",children:e.msg})})]}):Object(g.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(g.jsx)("div",{className:"messageBox backgroundLight",children:Object(g.jsx)("p",{className:"messageText colorDark",children:e.msg})}),Object(g.jsx)("p",{className:"sentText pl-10 ",children:e.sender})]})})})),Object(g.jsx)("div",{ref:N,style:{border:"none"}})]}):Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:ge,alt:"",width:"150",height:"150"}),"no messages"]})}),Object(g.jsxs)("form",{className:r.form,children:[Object(g.jsx)("input",{className:r.input,type:"text",placeholder:"Type a message...",value:u,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?function(e){e.preventDefault(),M()}(e):null}}),Object(g.jsx)(C.a,{variant:"contained",color:"primary",className:r.sendButton,onClick:M,children:"SEND"})]}),Object(g.jsx)(C.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(Oe.a,{}),onClick:i,children:"Close"})]})})]})},ve=Object(b.a)((function(e){return{image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),Ce=function(){var e=ve();return Object(g.jsxs)("div",{className:e.wrapper,children:[Object(g.jsx)(r.a,{position:"static",color:"primary",className:e.appBar,children:Object(g.jsx)(s.a,{className:l.a.bigheading,variant:"h2",align:"center",children:"\ud83d\udc65 Engage Meetings"})}),Object(g.jsx)(A,{}),Object(g.jsx)(ye,{}),Object(g.jsx)(se,{children:Object(g.jsx)(le,{})})]})};i.a.render(Object(g.jsx)(v,{children:Object(g.jsx)(Ce,{})}),document.getElementById("root"))}},[[473,1,2]]]);
//# sourceMappingURL=main.6b311ab9.chunk.js.map