(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t){},157:function(e,t){},175:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(10),r=n.n(c),i=n(217),s=n(212),o=n(67),l=n.n(o),u=n(42),d=n(210),j=n(177),b=n(207),m=n(112),O=n(11),p=n(97),f=n(68),x=n.n(f),g=n(3),h=Object(a.createContext)(),v=Object(p.io)("https://engage-meets.herokuapp.com/"),y=function(e){var t,n=e.children,c=Object(a.useState)(),r=Object(O.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(""),l=Object(O.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)({}),b=Object(O.a)(j,2),p=b[0],f=b[1],y=Object(a.useState)(!1),S=Object(O.a)(y,2),k=S[0],C=S[1],w=Object(a.useState)(!1),M=Object(O.a)(w,2),N=M[0],V=M[1],T=Object(a.useState)(""),R=Object(O.a)(T,2),I=R[0],D=R[1],E=Object(a.useState)(!0),F=Object(O.a)(E,2),A=F[0],U=F[1],q=Object(a.useState)(),B=Object(O.a)(q,2),z=B[0],W=B[1],J=Object(a.useState)(!0),P=Object(O.a)(J,2),_=P[0],G=P[1],L=Object(a.useState)(),H=Object(O.a)(L,2),K=H[0],Q=H[1],X=Object(a.useState)(!0),Y=Object(O.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)([]),te=Object(O.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(""),re=Object(O.a)(ce,2),ie=re[0],se=re[1],oe=Object(a.useRef)(),le=Object(a.useRef)(),ue=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){s(e),oe.current.srcObject=e})),v.on("me",(function(e){return d(e)})),v.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;f({isReceivingCall:!0,from:t,name:n,signal:a})})),v.on("updateUserMedia",(function(e){var t=e.type,n=e.currentMediaStatus;if(null!==n||n!==[])switch(t){case"video":W(n);break;case"mic":Q(n);break;default:Q(n[0]),W(n[1])}})),v.on("msgRcv",(function(e){e.name;var t=e.msg,n=e.sender;se({value:t,sender:n}),setTimeout((function(){se({})}),2e3)}))}),[]);return Object(g.jsx)(h.Provider,{value:{call:p,callAccepted:k,myVideo:oe,userVideo:le,stream:i,name:I,setName:D,callEnded:N,me:u,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){v.emit("callUser",{userToCall:e,signalData:t,from:u,name:I})})),t.on("stream",(function(e){le.current.srcObject=e})),v.on("callAccepted",(function(e){C(!0),t.signal(e),v.emit("updateMyMedia",{type:"both",currentMediaStatus:[_,A]})})),ue.current=t},leaveCall:function(){V(!0),ue.current.destroy(),window.location.reload()},answerCall:function(){C(!0);var e=new x.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){v.emit("answerCall",{signal:e,to:p.from,name:I,type:"both",myMediaStatus:[_,A]})})),e.on("stream",(function(e){le.current.srcObject=e})),e.signal(p.signal),ue.current=e},myVdoStatus:A,setMyVdoStatus:U,userVdoStatus:z,setUserVdoStatus:W,updateVideo:function(){U((function(e){return v.emit("updateMyMedia",{type:"video",currentMediaStatus:!e}),i.getVideoTracks()[0].enabled=!e,!e}))},myMicStatus:_,userMicStatus:K,updateMic:function(){G((function(e){return v.emit("updateMyMedia",{type:"mic",currentMediaStatus:!e}),i.getAudioTracks()[0].enabled=!e,!e}))},shareScreen:function(){Z?navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){oe.current.srcObject=e,t=e,k&&ue.current.replaceTrack(i.getVideoTracks()[0],e.getVideoTracks()[0],i),$(!1),e.getTracks()[0].onended=function(){oe.current.srcObject=i,k&&ue.current.replaceTrack(e.getVideoTracks()[0],i.getVideoTracks()[0],i),$(!0)}})):($(!0),t=oe.current.srcObject,oe.current.srcObject=i,k&&ue.current.replaceTrack(t.getVideoTracks()[0],i.getVideoTracks()[0],i))},myScreen:Z,sendMsg:function(e){v.emit("messageUser",{name:I,to:p.from,msg:e,sender:I});var t={};t.msg=e,t.type="sent",t.timestamp=Date.now(),t.sender=I,ae([].concat(Object(m.a)(ne),[t]))},msgRcv:ie,chat:ne,setChat:ae,setMsgRcv:se},children:n})},S=n(179),k=n(213),C=n(103),w=n.n(C),M=n(104),N=n.n(M),V=n(105),T=n.n(V),R=n(106),I=n.n(R),D=n(107),E=n.n(D),F=n(108),A=n.n(F),U=n(109),q=n.n(U),B=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},video:Object(u.a)({width:"600px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(u.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"20px",background:"black",color:"white"},ButtonGroup:{background:"violet",justifyContent:"center"}}})),z=function(){var e=Object(a.useContext)(h),t=e.name,n=e.callAccepted,c=e.myVideo,r=e.userVideo,i=e.callEnded,o=e.stream,l=e.call,u=e.myVdoStatus,b=e.updateVideo,m=e.myMicStatus,O=e.updateMic,p=e.shareScreen,f=e.myScreen,x=B();return Object(g.jsxs)("div",{className:x.root,children:[Object(g.jsxs)(d.a,{container:!0,className:x.gridContainer,children:[o&&Object(g.jsx)(j.a,{className:x.paper,children:Object(g.jsxs)(d.a,{item:!0,xs:5,md:3,children:[Object(g.jsx)(s.a,{variant:"h4",gutterBottom:!0,background_color:"red",children:t||"My Name"}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:x.video,style:{opacity:"".concat(u?"1":"0")}})]})}),n&&!i&&Object(g.jsx)(j.a,{className:x.paper,children:Object(g.jsxs)(d.a,{item:!0,xs:12,md:6,children:[console.log(l.name),Object(g.jsx)(s.a,{variant:"h4",background_color:"red",gutterBottom:!0,children:l.name||"Caller Name"}),Object(g.jsx)("video",{playsInline:!0,id:"usVideo",ref:r,autoPlay:!0,className:x.video})]})})]}),Object(g.jsxs)(k.a,{class:"btn-toolbar",variant:"contained",color:"primary","aria-label":"contained primary button group",className:x.buttons,children:[Object(g.jsx)(S.a,{startIcon:m?Object(g.jsx)(w.a,{}):Object(g.jsx)(N.a,{}),onClick:function(){return O()},children:m?Object(g.jsx)("span",{children:"Mute"}):Object(g.jsx)("span",{children:"Unmute"})}),Object(g.jsx)(S.a,{startIcon:u?Object(g.jsx)(T.a,{}):Object(g.jsx)(I.a,{}),onClick:function(){return b()},children:u?Object(g.jsx)("span",{children:"Turn off Video"}):Object(g.jsx)("span",{children:"Turn on Video"})}),Object(g.jsx)(S.a,{startIcon:f?Object(g.jsx)(E.a,{}):Object(g.jsx)(A.a,{}),onClick:function(){return p()},children:f?Object(g.jsx)("span",{children:"Share Screen"}):Object(g.jsx)("span",{children:"Stop Sharing Screen"})}),Object(g.jsx)(S.a,{startIcon:Object(g.jsx)(q.a,{}),onClick:function(){return function(){if(n){var e=document.getElementById("usVideo");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}()},children:"Fullscreen"})]})]})},W=n(214),J=n(218),P=n(110),_=n(215),G=n(216),L=n(111),H=n.n(L),K=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(u.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(u.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),Q=function(e){var t=e.children,n=Object(a.useContext)(h),c=n.me,r=n.callAccepted,i=n.name,o=n.setName,l=n.callEnded,u=n.leaveCall,b=n.callUser,m=Object(a.useState)(""),p=Object(O.a)(m,2),f=p[0],x=p[1],v=K();return Object(g.jsx)(W.a,{className:v.container,children:Object(g.jsxs)(j.a,{elevation:10,className:v.paper,children:[Object(g.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(g.jsxs)(d.a,{container:!0,className:v.gridContainer,children:[Object(g.jsxs)(d.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Meet Info"}),Object(g.jsx)(J.a,{label:"Name",value:i,onChange:function(e){return o(e.target.value)},fullWidth:!0}),Object(g.jsx)(P.CopyToClipboard,{text:c,className:v.margin,children:Object(g.jsx)(S.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(g.jsx)(_.a,{fontSize:"large"}),children:"Copy Meeting ID"})})]}),Object(g.jsxs)(d.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Join a Meet"}),Object(g.jsx)(J.a,{label:"Meet ID",value:f,onChange:function(e){return x(e.target.value)},fullWidth:!0}),r&&!l?Object(g.jsx)(S.a,{variant:"contained",color:"secondary",startIcon:Object(g.jsx)(H.a,{fontSize:"large"}),fullWidth:!0,onClick:u,className:v.margin,children:"End Call"}):Object(g.jsx)(S.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(G.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return b(f)},className:v.margin,children:"Enter Call"})]})]})}),t]})})},X=n.p+"static/media/ringtone.62957dca.mp3",Y=function(){var e=Object(a.useContext)(h),t=e.answerCall,n=e.call,c=e.callAccepted,r=Object(a.useState)("undefined"!==typeof Audio&&new Audio(X)),i=Object(O.a)(r,1)[0],s=Object(a.useState)(!1),o=Object(O.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){l?i.play():i.pause()}),[l,i]);return Object(a.useEffect)((function(){n.isReceivingCall&&!c?u(!0):u(!1)}),[n.isReceivingCall,c]),Object(g.jsx)(g.Fragment,{children:n.isReceivingCall&&!c&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(g.jsxs)("h1",{children:[n.name," is calling: "]}),Object(g.jsx)(S.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"}),Object(g.jsx)(S.a,{variant:"contained",color:"primary",onClick:function(){window.location.reload()},children:"Reject"})]})})})},Z=Object(b.a)((function(e){return{image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),$=function(){var e=Z();return Object(g.jsxs)("div",{className:e.wrapper,children:[Object(g.jsx)(i.a,{position:"static",color:"inherit",className:e.appBar,children:Object(g.jsx)(s.a,{className:l.a.bigheading,variant:"h2",align:"center",children:"\ud83d\udc65 Engage Meetings"})}),Object(g.jsx)(z,{}),Object(g.jsx)(Q,{children:Object(g.jsx)(Y,{})})]})};r.a.render(Object(g.jsx)(y,{children:Object(g.jsx)($,{})}),document.getElementById("root"))},67:function(e,t,n){}},[[175,1,2]]]);
//# sourceMappingURL=main.7b10e301.chunk.js.map